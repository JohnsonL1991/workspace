require(["js/conf/config"],function(){require(["jquery","swiper","floorslider","indexajaxmapping","template","common"],function(a,b,c,d,e,f){console.log("\u6210\u529F\u5BFC\u5165\u6A21\u5757"),a(function(){function g(b){function c(a,b){e=setInterval(function(){b++,b>=a&&(b=0),d(b,".kv_banner_slide",".kv_banner_pagination_item")},2e3)}function d(b,c,d){a(c).eq(b).stop().fadeIn().siblings().stop().fadeOut(),a(d).eq(b).addClass("active").siblings().removeClass("active")}var e=null,f=0,g=b;a(".kv_banner_slide").eq(0).addClass("current"),a(".kv_banner_pagination_item").eq(0).addClass("active"),c(g,f),a(".kv_banner").hover(function(){clearInterval(e)},function(){c(g,f)}),a(".kv_banner_pagination_item").on("mouseenter",function(){f=a(this).index(),d(f,".kv_banner_slide",".kv_banner_pagination_item")})}(function(){a.ajax({type:"get",url:d.focus_gateway,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpFocus",success:function(b){a("#templates").load("http://localhost:8080/pages/templates/index/banner.html",function(){var c=e("banner",{list:b.data});a(".kv_banner").html(c),g(b.data.length)})}}),a.ajax({type:"get",url:d.hotwords,dataType:"jsonp",callback:"callback",jsonpCallback:"jsonpHotWords",success:function(b){var c=b.data[0],d=a("<a></a>");a("#templates").load("http://localhost:8080/pages/templates/index/hotwords.html",function(){var c=e("hotwords",{list:b.data});a(".hd_hotword_wrap").html(c),a("#hd_search").attr("placeholder",b.data[0][0].n)})}}),a.ajax({type:"get",url:d.rushbuy,dataType:"jsonp",jsonp:"callback",jsonpCallback:"sonpSeckill",success:function(c){a("#templates").load("http://localhost:8080/pages/templates/index/rushbuy.html",function(){var d=e("rushbuy",{list:c.indexMiaoSha});a(".rush_buy_banner .swiper-wrapper").html(d);new b(".rush_buy_banner",{slidesPerView:4,slidesPerGroup:4,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",disabledClass:"my-button-disabled"}})})}}),a.ajax({type:"get",url:d.kvrec,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpRec",success:function(b){a("#templates").load("http://localhost:8080/pages/templates/index/kvrec.html",function(){var c=e("kvrec",{list:b.data});a(".kv_rec_wrap").html(c)})}}),a.getJSON("http://localhost:8080/js/data/index/pcyoulike.json",function(b){console.log(b.result.data),a("#templates").load("http://localhost:8080/pages/templates/index/youlike.html",function(){var c=e("youlike",{list:b.result.data});console.log(c.length),a(".pyl_ul").html(c)})})})(),function(){a(".topbanner_wrap").hover(function(){clearTimeout(this.timer),this.timer=setTimeout(function(){a(".topbanner_small").animate({height:0},200,function(){a(".topbanner_small").css("display","none")}),a(".topbanner_large").css({display:"inline-block",height:"0"}).animate({height:"250px"},200)},600)},function(){clearTimeout(this.timer),this.timer=setTimeout(function(){a(".topbanner_small").css({display:"block"}).animate({height:"80px"},200),a(".topbanner_large").animate({height:"0px"},200,function(){a(".topbanner_large").css("display","none")})},600)}),a(".topbanner_wrap .close_btn").on("click",function(){a(".topbanner_wrap").fadeOut()})}(),function(){a(".header_city").on("click",function(b){b.stopPropagation(),a(this).addClass("active"),a(".hd_city_wrap").css("display","block")}),a(".hd_city_wrap").on("click",function(a){a.stopPropagation()}),a(".hd_city_link_content a").on("click",function(){a(this).index();a(".hd_city_list").stop().animate({scrollTop:a(".hd_city_list li").eq(a(this).index()).position().top})}),a(document).on("click",function(){a(".header_city").removeClass("active"),a(".hd_city_wrap").css("display","none")}),a("#hd_city_search_input").on("input",function(){""==a(this).val()?a(this).parent().removeClass("active"):a(this).parent().addClass("active")}),a(".hd_city_search_input_clear").on("click",function(){a("#hd_city_search_input").val(""),a(this).parent().removeClass("active")}),a("#hd_city_search_input").on("blur",function(){""==a(this).val()?a(this).parent().removeClass("active"):a(this).parent().addClass("active")})}(),function(){a(".hd_search_box").on("click",function(a){a.stopPropagation()}),a("#hd_search").on("input",f.debounce(function(){a(".hd_search_result_box").html(""),""!=a(this).val().trim()&&a.ajax({type:"get",url:d.search,data:{keywordPrefix:a(this).val().trim()},success:function(b){0<b.data.length&&(a(b.data).each(function(b,c){a(".hd_search_result_box").append("<div class=\"hd_search_result_item\">"+c+"</div>")}),a(".hd_search_result_box").css("display","block"))}})},500)),a(".hd_search_result_box").on("click",".hd_search_result_item",function(b){b.stopPropagation(),a("#hd_search").val(a(this).html()),a(".hd_search_result_box").css("display","none").empty()}),a(document).on("click",function(){a(".hd_search_result_box").css("display","none"),a(".hd_search_result_box").empty()})}(),function(){c.floorStackSlide(a(".index_floor_left_banner")),c.floorSwitcHover(a(".column_part_banner")),function(a){var b=a.find("ul"),c=b.find("li"),d=null;d=setInterval(function(){b.animate({"margin-top":-c.height()},500,function(){b.css({"margin-top":0}).find("li:first").appendTo(b)})},5e3),1>=c.length||a.hover(function(){clearInterval(d)},function(){d=setInterval(function(){b.animate({"margin-top":-c.height()},500,function(){b.css({"margin-top":0}).find("li:first").appendTo(b)})},5e3)})}(a(".lb_banner")),a(".gp_rank_tab_category").on("mouseenter",function(){a(this).addClass("active").siblings().removeClass("active")})}(),function(){a("body").on("scroll",f.throttle(function(){a(this).scrollTop()>a(".rush_buy_wrap").position().top?a(".hd_search_w").hasClass("hd_search_fixed")||a(".hd_search_w").addClass("hd_search_fixed").animate({top:0}):a(".hd_search_w").hasClass("hd_search_fixed")&&(a(".hd_search_w").removeClass("hd_search_fixed"),a(".hd_search_w").css("top","-60px"))},100)),a("body").on("scroll",f.debounce(function(){a(this).scrollTop()>a(".rush_buy_wrap").position().top?a("#floor_nav").fadeIn():a("#floor_nav").fadeOut()},200)),a("#floor_nav li").not(":last").on("click",function(b){b.stopPropagation(),console.log(a(this).index());var c=a(".floor").eq(a(this).index()).position().top-100;console.log(c),a("body").stop().animate({scrollTop:c})})}()})})});